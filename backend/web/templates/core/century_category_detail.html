{% extends "base.html" %}
{% block content %}
    {% load static %}

    <br>

    <div class="container">
        <center>
            {% for object in object_list %}
                <div class="bg-link d-inline-block">
                    <div>
                        {% if object.image %}
                            <div class="flip-card audio-root">
                                <div class="flip-card-inner">
                                    <div class="flip-card-front">
                                        <img class="" src="{{ object.image.url }}" alt=""
                                             style="width:250px;height:300px;">
                                    </div>
                                    <div class="flip-card-back">
                                        {% if object.website %}
                                            <div id="ytplayer">
                                                <iframe width="250" height="315" src="{{ object.website }}"
                                                        title="YouTube video player" frameborder="0"
                                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                                        allowfullscreen></iframe>
                                            </div>
                                        {% else %}
                                            <div>
                                                {{ object.text_preview }}
                                                {% for song in object.songs.all %}
                                                    {% if song.file %}
                                                        <div class="audio {% if forloop.counter != 1 %}hidden{% endif %}"
                                                             id="id_{{ song.id }}">
                                                            <audio style="width: 250px" controls
                                                                   src="{{ song.file.url }}"></audio>
                                                        </div>
                                                    {% endif %}
                                                {% endfor %}
                                                {% if object.songs.exists %}
                                                    <select class="select-audio" name="audio" id="id_audio">
                                                        {% for song in object.songs.all %}
                                                            {% if song.file %}
                                                                <option value="{{ song.id }}">
                                                                    {{ song.name }}
                                                                </option>
                                                            {% endif %}
                                                        {% endfor %}
                                                    </select>
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        <div>
                            <a href="{{ object.get_absolute_url }}">{{ object }}</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
            </ul>
        </center>
    </div>
    </aside>

    <style>
        img {
            height: 150px;
            width: 120px;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        .flip-card {
            background-color: transparent;
            width: 250px;
            height: 300px;
            perspective: 1000px;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        }

        .flip-card:hover .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            vertical-align: middle;
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .flip-card-front {
            background-color: #bbb;
            color: black;
        }

        .flip-card-back {
            background-color: #2980b9;
            color: white;
            text-align: center;
            transform: rotateY(180deg);
        }
    </style>

    <div class="container my-5">
    <div class="card">
    <div class="row">
    <aside class="col-sm-5   border-center">
        <article class="card-body p-5">
            <div class="container-fluid">
                <div class="row">
                    <div class="form-group col-11">

                        <ul>
                            <p><strong>исторический контекст {{ century.slug }} века </strong></p>
                            {{ century.text }}
                        </ul>
    </aside>

    <aside class="col-sm-7">
    <article class="card-body p-5">
    <div class="collapse" id="collapseExample" style="">
        <div class="card card-body">
        </div>
    </div>


    <div class="container-fluid">
    <div class="row">
    {% csrf_token %}
    <div class="form-group col-11">
    {% if view.kwargs.category == 'philosopher' %}
        <ul>
            <p><strong>философские представления {{ century.slug }} века:</p></strong>
            {{ description.text }}
        </ul>
    {% endif %}
    {% if view.kwargs.category == 'artist' %}
        <ul>
            <p><strong> художественные стили {{ century.slug }} столетия в контексте {{ century.slug }} века:
            </p></strong>
            {{ description.text }}
        </ul>
    {% endif %}
    {% if view.kwargs.category == 'spiritual' %}
        <ul>
            <div>
                <p><strong>христиансво в {{ century.slug }} веке:</strong></p>
            </div>
            <div>
                {{ description.detailed_text }}
            </div>
        </ul>
    {% endif %}
    {% if view.kwargs.category == 'music' %}
        <ul>
            <p><strong> музыка в {{ century.slug }} веке:</p></strong>
            {{ description.text }}
        </ul>
    {% endif %}
    <script src="{% static 'core/player.js' %}"></script>
    {% for subcategory in subcategorylist %}
        <div>
            <a href="?sub={{ subcategory.slug }}">{{ subcategory.name }}</a>
        </div>

    {% endfor %}

    {% if view.kwargs.category == 'philosopher' %}

        <a class="btn btn-link" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button"
           aria-controls="offcanvasExample">
            подробнее
        </a>

    {% endif %}
    {% if view.kwargs.category == 'spiritual' %}

        <a class="btn btn-link" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button"
           aria-controls="offcanvasExample">
            {% if centurydescription.rel_changes_text %}
                краткая информация об иудаизме и мусульманстве в {{ century.slug }} веке
                </a>
            {% endif %}
    {% endif %}

    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">подробности</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                    aria-label="Закрыть"></button>
        </div>
        <div class="offcanvas-body">
            {% if view.kwargs.category == 'philosopher' %}
                <div>
                    <p><strong>философские ответы на вызовы {{ century.slug }} века:</strong></p>
                </div>
            {% endif %}
            {% if view.kwargs.category == 'spiritual' %}
                <p><strong> мировые религии в {{ century.slug }} веке:</p></strong>
                {{ description.text }}
            {% endif %}

            <br>
            {% if view.kwargs.category == 'philosopher' %}
                <div>
                    <p><strong>религиозные изменения {{ century.slug }} века:</strong></p>
                </div>
            {% endif %}
            {% if view.kwargs.category == 'spiritual' %}
                <div>
                    <p><strong>иудаизм в {{ century.slug }} веке:</strong></p>
                </div>
                <div>
                    {{ description.rel_changes_text }}
                </div>
            {% endif %}
            {% if view.kwargs.category == 'philosopher' %}
                <div>
                    {{ description.rel_changes_text }}
                </div>
            {% endif %}
            {% if view.kwargs.category == 'philosopher' %}
                <div>
                    <p><strong>философские ошибки {{ century.slug }} века:</strong></p>
                </div>
            {% endif %}
            {% if view.kwargs.category == 'spiritual' %}
                <br>
                <div>
                    <p><strong> мусульманство в {{ century.slug }} веке:</strong></p>
                </div>
            {% endif %}
            <div>
                {{ description.mistake_text }}
            </div>
        </div>
    </div>

{% endblock %}





